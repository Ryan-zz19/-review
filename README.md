# -review
以下是依据你给出的“操作系统期末考试重点”整理的一份高效复习资料（结构清晰、必背要点+例题+易错点）。建议先通读“速记版”，再看“例题”，最后刷题巩固。

目录
- 考试说明与范围速记
- 第一部分：操作系统概论
- 第二部分：进程管理（大题高频）
- 第三部分：处理机调度（算法+算题）
- 第四部分：死锁（必要条件+银行家算法）
- 第五部分：存储管理（实存+虚存+置换）
- 第六部分：文件管理（可能不考，给速记）
- 高频易错点与速记口诀
- 模拟小题与答案（含调度/页面置换）

考试说明与范围速记
- 分数构成：平时40 + 期末60
- 题型：单选25×2=50；填空5×2=10；大题4×10=40
- 范围：概论、进程管理（描述/同步）、死锁、处理机调度、存储管理1（实存），虚存与页面置换也在重点中；文件管理不一定考（看老师最终说明）

第一部分：操作系统概论
1) 基本概念
- 裸机：无任何软件支持的硬件
- 虚拟机：用软件模拟出的“看起来像硬件”的系统
- OS：管理硬件/软件资源、控制程序运行、改善人机界面、为上层软件提供支持的系统软件

2) 四大特征（并、共、虚、异）
- 并发：同一时间段内多个任务推进（宏观并行、微观串行）
- 共享：多进程共享资源（互斥共享/同时共享）
- 虚拟：把一个物理实体“变多”或“变大”（如虚拟存储、虚拟处理器）
- 异步：进程推进速度不可预知

3) 发展
- 多道程序设计：让CPU在I/O等待时切到别的程序，提高吞吐
- 基本类型：批处理、分时、实时

第二部分：进程管理（大题高频）
1) 进程与PCB
- 定义：进程=程序的一次执行
- 特征：动态性、并发性、独立性、异步性
- 组成：程序段+数据段+PCB（进程控制块，记录PID、状态、寄存器、指针、资源等）

2) 进程状态与切换
- 三态：就绪 Ready → 运行 Running → 阻塞 Blocked
- 五态：加入新建/终止
- 原语：不可分割的原子操作（常用于状态切换、同步）
- 处理机状态：核心态（可执行特权指令）vs 用户态（受限指令）

3) 同步与互斥（PV高频）
- 互斥：临界资源+临界区CS（同一时刻只能一个进程进入）
- 同步：按一定顺序配合执行（前趋图可描述先后关系）
- 信号量S与PV：
  - P(S)：S=S-1；若S<0则阻塞
  - V(S)：S=S+1；若S≤0唤醒一个等待进程
- 常见模板（互斥）：
  - 初始化：mutex=1
  - 进入CS：P(mutex)
  - 退出CS：V(mutex)
- 生产者-消费者（简记）
  - 资源信号量：empty=缓冲区可用空位；full=已有产品
  - 互斥信号量：mutex=1
  - 生产者：P(empty)→P(mutex)→生产→V(mutex)→V(full)
  - 消费者：P(full)→P(mutex)→消费→V(mutex)→V(empty)

第三部分：处理机调度
1) 三层调度
- 高级（作业调度）：外存↔内存，频率低
- 中级（内存/交换）：进出内存的驻留控制
- 低级（进程调度）：就绪队列选谁上CPU，频率高

2) 常见算法（掌握适用场景与指标）
- FCFS：先来先服务（对长作业友好，交互差）
- SJF/SPF：短作业优先（平均等待/周转最优，可能饥饿）
- HRRN：高响应比优先，响应比=(等待+服务)/服务，兼顾长短作业
- RR：时间片轮转（分时系统常用，响应好，时间片选取关键）
- 优先级：静态/动态，易饥饿（需老化）
- 多级反馈队列（MLFQ）：综合最优、实际系统常用

3) 评价指标
- 周转时间=完成时刻-到达时刻
- 带权周转=周转/服务时间
- 平均值“按作业取平均”
- 响应时间：首次响应-到达时间（分时系统关注）

4) 小例题（非抢占，到达同0）
- 进程与服务时间：P1=6，P2=2，P3=4
- FCFS顺序：1-2-3
  - 完成时刻：P1=6，P2=8，P3=12
  - 周转：6,8,12；平均=26/3≈8.67
- SJF顺序：P2(2)-P3(4)-P1(6)
  - 完成时刻：2,6,12
  - 周转：2,6,12；平均=20/3≈6.67（更优）

第四部分：死锁
1) 定义与原因
- 多进程因竞争资源/推进顺序不当导致相互等待、无法推进

2) 四个必要条件（“互请非环”）
- 互斥：资源一次只能一个占用
- 请求并保持：占着还要申请新资源
- 不剥夺：资源不能强制回收
- 环路等待：形成循环等待

3) 处理策略
- 预防：破坏四条件之一（最严格、资源利用率低）
- 避免：银行家算法，确保系统保持安全状态（存在安全序列）
- 检测：资源分配图、等待图
- 解除：剥夺资源、回滚/撤销进程、重启

4) 银行家算法要点
- Need=Max-Allocation
- 安全性检查：找出能一次满足Need≤Available的进程，假设“完成并释放”资源，是否能形成安全序列
- 能找到安全序列→安全；否则不安全（不等于必死锁）

小练习（口算版）
- Available=(3,3), P1 Need=(1,2), P2 Need=(3,1)
- 先满足P1（够），完成后释放→Available’增加，再满足P2→存在安全序列(P1,P2)→安全

第五部分：存储管理
1) 实存管理（连续分配）
- 单一连续：整个内存给一道程序（早期）
- 固定分区：内存划成固定块，易内碎片
- 动态分区：按需分配，可产生外碎片
- 动态分区的空闲分配策略：
  - 首次适应FF：从头找第一个够大的
  - 最佳适应BF：找最小但够用的（外碎片多、分裂多）
  - 最坏适应WF：找最大的（保留大空闲块）
  - 循环首次NF：从上次位置继续找

2) 分页与地址变换（虚拟内存基础）
- 页（逻辑）/帧（物理）大小相同
- 虚拟地址=页号+页内偏移；物理地址=帧号+偏移
- 页表：页号→帧号
- TLB（快表）：缓存热点页表项，加速地址变换
- EAT（有效访问时间）近似：EAT = 命中率 h×(TLB时间+内存1次) + (1-h)×(TLB时间+内存2次)
- 二级页表：按需加载页表块，降低页表常驻开销
- 分段：按逻辑模块划分，段号+段内偏移，易共享/保护；段页式：段表项指向页表

3) 虚拟存储器（请求分页）
- 特征：多次性（分多次装入）、对换性（缺页换入换出）、虚拟性（逻辑大于物理）
- 缺页中断：访问不在内存的页→中断→调页→可能置换
- 工作集：一定窗口内活跃的页集合；工作集过大→抖动（频繁缺页）

4) 页面置换算法（重点）
- OPT：理论最优（未来最远的先换），不可实现，用于下界比较
- FIFO：先进先出，可能Belady异常（页框增多反而缺页更多）
- LRU：最近最久未用，性能好；实现可用栈/链表/时钟近似（Clock）

第六部分：文件管理（可能不考，速记）
1) 基本概念
- 文件：有意义的信息集合；FCB/目录项记录元数据；i-node（索引节点，Unix）
2) 逻辑结构：流式、记录式
3) 物理结构
- 连续：顺序好，易外碎片
- 链接：隐式（指针在块中），显式（FAT在内存，快）
- 索引：多级索引/混合索引（Unix）
4) 空闲空间管理：空闲表、空闲链表、位示图、成组链接（Unix）
5) 共享：硬链接（i-node共享）、软链接（符号路径）

高频易错点与速记口诀
- OS四特征：并、共、虚、异
- 同步互斥PV：先P后V，互斥用1，资源用计数
- 死锁条件：互、请、非、环；破一条即可预防
- 调度目标：
  - 批处理：周转/带权周转最小→SJF/HRRN
  - 分时：响应时间好→RR/MLFQ
- 周转时间=完成-到达；带权周转=周转/服务
- 分页地址：物理=帧号:偏移；TLB命中省一次访存
- FIFO可能Belady异常，LRU性能稳

模拟小题与答案
1) 调度（到达时间不同时，非抢占SJF）
- 进程：(到达, 服务)
  - P1(0,8), P2(1,4), P3(2,2), P4(3,1)
- 时间线：
  - t=0 执行P1(8)；t=1,2,3有P2,P3,P4到达，但非抢占，继续P1至t=8
  - t=8 就绪队列有P2(4), P3(2), P4(1) → 选最短P4→P4(t=8~9)→P3(t=9~11)→P2(t=11~15)
- 完成时刻：P1=8, P4=9, P3=11, P2=15
- 周转：P1=8-0=8, P2=15-1=14, P3=11-2=9, P4=9-3=6
- 平均周转=(8+14+9+6)/4=9.25

2) 银行家算法（判断安全）
- 系统资源总量A=(10,5)
- 已分配Allocation：
  - P1(3,1), P2(2,1), P3(2,1)
- 最大需求Max：
  - P1(7,3), P2(3,2), P3(5,3)
- 已占用合计=(7,3) → Available=A-AllocationSum=(10,5)-(7,3)=(3,2)
- Need=Max-Allocation：
  - P1(4,2), P2(1,1), P3(3,2)
- 安全性检查：
  - Available(3,2) ≥ P2(1,1) → 假设完成释放(2,1) → Av’=(5,3)
  - Av’(5,3) ≥ P1(4,2) → 释放(3,1) → Av’’=(8,4)
  - Av’’(8,4) ≥ P3(3,2) → 释放(2,1) → Av’’’=(10,5)
  - 存在安全序列(P2,P1,P3)→安全

3) 页面置换（LRU vs FIFO）
- 参考串：7,0,1,2,0,3,0,4，页框=3，初始空
- FIFO 缺页数：7/0/1(3)→2(4)→0(已有)→3(5)→0(已有)→4(6) → 共6次
- LRU 粗略：7,0,1→2(换7)→0(有)→3(换1)→0(有)→4(换2) → 共6次（此例两者相同，但通常LRU≤FIFO）

考前最后一页速记
- 死锁“互请非环”；预防破一条、避免看安全序列
- PV口诀：先P资源计数/互斥，再进临界；出临界先V互斥再V资源
- 调度指标：批处理看周转；分时看响应；实时看截止
- 算题套路：画时间线，列完成/周转/响应
- 存储：分页地址变换+TLB；LRU优于FIFO；Belady异常只在FIFO
- 动态分区：FF快，BF省内存但易碎片，WF保大块

如果你希望，我可以把这份笔记整理成可打印的A4速览版（1-2页），或者给你出一套针对性的10道练习题（含答案）专练“大题”。你更倾向哪种？
